---
import BaseLayout from "../layouts/BaseLayout.astro";
import ChatBox from "../components/ChatBox.astro";
---

<BaseLayout title="Asistente DomÃ³tico" description="Interfaz principal del asistente">
	<section class="mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 h-full flex flex-col">
		<div id="intro-section" class="text-center mb-8 sm:mb-12 transition-all duration-300">
			<div class="animate-fadeInUp" style="animation-delay: 0.1s; opacity: 0;">
				<h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 sm:mb-4 px-2 drop-shadow-lg">
					ğŸ  Asistente DomÃ³tico
				</h1>
				<p class="text-lg sm:text-xl text-white/90 mb-6 sm:mb-8 px-2 drop-shadow-md">Controla tu hogar inteligente con solo un mensaje</p>
			</div>
			
			<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 mb-8 sm:mb-10">
				<div class="animate-fadeInUp backdrop-blur-md bg-white/90 p-4 sm:p-5 rounded-xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 border border-white/50" style="animation-delay: 0.2s; opacity: 0;">
					<div class="text-3xl sm:text-4xl mb-2">ğŸ’¡</div>
					<h3 class="font-bold text-gray-900 mb-2 text-base sm:text-lg">Control de Luces</h3>
					<p class="text-xs sm:text-sm text-gray-600">Gestiona la iluminaciÃ³n de cada habitaciÃ³n</p>
				</div>
				<div class="animate-fadeInUp backdrop-blur-md bg-white/90 p-4 sm:p-5 rounded-xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 border border-white/50" style="animation-delay: 0.3s; opacity: 0;">
					<div class="text-3xl sm:text-4xl mb-2">ğŸšª</div>
					<h3 class="font-bold text-gray-900 mb-2 text-base sm:text-lg">Control de Puertas</h3>
					<p class="text-xs sm:text-sm text-gray-600">Abre y cierra puertas de forma inteligente</p>
				</div>
				<div class="animate-fadeInUp backdrop-blur-md bg-white/90 p-4 sm:p-5 rounded-xl shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 border border-white/50 sm:col-span-2 lg:col-span-1" style="animation-delay: 0.4s; opacity: 0;">
					<div class="text-3xl sm:text-4xl mb-2">ğŸŒ¡ï¸</div>
					<h3 class="font-bold text-gray-900 mb-2 text-base sm:text-lg">ClimatizaciÃ³n</h3>
					<p class="text-xs sm:text-sm text-gray-600">Controla temperatura y ventilaciÃ³n</p>
				</div>
			</div>
			
			<!-- BotÃ³n de comenzar chat -->
			<div class="animate-fadeInUp" style="animation-delay: 0.5s; opacity: 0;">
				<button id="start-chat-btn" class="inline-flex items-center justify-center gap-2 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white text-sm sm:text-base font-bold rounded-full shadow-2xl hover:shadow-cyan-500/50 transition-all duration-300 hover:scale-105 w-full sm:w-auto">
					<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
					</svg>
					<span>Comenzar conversaciÃ³n</span>
				</button>
			</div>
		</div>

		<!-- Chat Container -->
		<div id="chat-container" class="backdrop-blur-md bg-white/95 border border-white/50 rounded-2xl shadow-2xl opacity-0 transform translate-y-4 transition-all duration-300 w-full flex-1 flex flex-col min-h-0 sm:min-h-auto sm:-mt-8">
			<ChatBox />
		</div>
	</section>

	<script>
		const startBtn = document.getElementById('start-chat-btn');
		const chatContainer = document.getElementById('chat-container');
		const introSection = document.getElementById('intro-section');
		const section = document.querySelector('section');
		
		// Detectar si es mÃ³vil
		function isMobile() {
			return window.innerWidth < 640; 
		}
		
		if (startBtn && chatContainer) {
			startBtn.addEventListener('click', function() {
				const mobile = isMobile();
				
				startBtn.style.transform = 'scale(0.95)';
				startBtn.style.opacity = '0';
				
				setTimeout(() => {
					startBtn.style.display = 'none';
					
					// En mÃ³viles, ocultar la secciÃ³n intro y expandir el chat completamente
					if (mobile && introSection) {
						introSection.style.display = 'none';
						if (section) {
							section.style.paddingTop = '0';
							section.style.paddingBottom = '0';
						}
						chatContainer.style.height = '100%';
						chatContainer.style.maxHeight = '100%';
						chatContainer.style.borderRadius = '0';
						chatContainer.style.marginTop = '0';
					} else {
						
						chatContainer.style.marginTop = '-2rem';
					}
					
					chatContainer.style.opacity = '1';
					chatContainer.style.transform = 'translateY(0)';
					
					setTimeout(() => {
						const chatInput = document.getElementById('user-input');
						if (chatInput) {
							chatInput.focus();
						}
					}, 300);
				}, 200);
			});
		}
	</script>
</BaseLayout>
